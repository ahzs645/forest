<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <title>BC Forestry Trail</title>
    <link rel="stylesheet" href="scss/main.scss" />
  </head>
  <body>
    <!-- Landing Screen -->
    <div id="landing-screen" class="landing-screen">
      <div class="terminal-frame">
        <!-- Terminal Header -->
        <div class="terminal-header">
          <div class="terminal-header-left">
            <span class="terminal-icon">â–¶</span>
            <span class="terminal-id">TERMINAL_ID: 88-X // STATUS: ONLINE</span>
          </div>
          <div class="terminal-header-right">
            <span>MEM: 64K OK</span>
            <span>//</span>
            <span>BEC_ZONES: LOADED</span>
          </div>
        </div>

        <!-- Terminal Body -->
        <div class="terminal-body compact">
          <!-- ASCII Logo + Title Combined -->
          <div class="ascii-logo compact">
            <pre class="ascii-tree">    /\
   /  \      BRITISH COLUMBIA
  /    \     FORESTRY OPERATIONS
 /______\    SIMULATOR v1.0.4
    ||</pre>
            <div class="logo-tagline">|||| "SUSTAINABILITY THROUGH DATA" ||||</div>
          </div>

          <!-- System Ready -->
          <h1 class="system-ready-title">SYSTEM READY</h1>

          <!-- Welcome + System Checks Combined -->
          <div class="welcome-checks-combined">
            <p class="welcome-line">Welcome, Operator. You have been assigned to <span class="highlight">Management Unit 5-12</span>.</p>
            <p class="welcome-line dim">Your objective: Balance ecological integrity with timber volume targets.</p>
            <div class="system-checks-inline">
              <span>&gt; BEC Zones...<span class="check-status ok">OK</span></span>
              <span>&gt; Harvesting Units...<span class="check-status ok">OK</span></span>
              <span>&gt; Market Rates...<span class="check-status updated">UPDATED</span></span>
              <span>&gt; HQ Connection...<span class="check-status connected blink">CONNECTED</span></span>
            </div>
          </div>

          <!-- Main Action Buttons -->
          <div class="landing-actions compact">
            <button id="new-game-btn" class="landing-btn primary" type="button">
              <span class="btn-icon">&gt;</span>
              <span class="btn-text">[N]EW SIMULATION</span>
            </button>
            <button id="load-game-btn" class="landing-btn secondary" type="button">
              <span class="btn-icon">=</span>
              <span class="btn-text">[L]OAD DATA</span>
            </button>
            <div class="landing-btn-row">
              <button id="help-landing-btn" class="landing-btn ghost" type="button">
                <span class="btn-icon">?</span>
                <span class="btn-text">[H]ELP</span>
              </button>
              <button id="settings-btn" class="landing-btn ghost" type="button">
                <span class="btn-icon">*</span>
                <span class="btn-text">SETTINGS</span>
              </button>
            </div>
          </div>
        </div>

        <!-- Terminal Footer -->
        <div class="terminal-footer">
          <span>&gt; INPUT: KEYBOARD_MOUSE</span>
          <span>&gt; REGION: NORTH_INT</span>
          <span class="version">v1.0.4-stable</span>
        </div>
      </div>
    </div>

    <!-- Init Overlay (Crew/Role/Area Selection) -->
    <div id="init-overlay" class="init-overlay" hidden>
      <div class="init-frame">
        <!-- Terminal Window Header -->
        <div class="init-window-header">
          <div class="window-dots">
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
          </div>
          <span class="window-title">TERMINAL_01.EXE</span>
        </div>

        <!-- Intro Step -->
        <section id="intro-step" class="init-step active">
          <div class="init-content">
            <div class="init-logo">
              <span class="tree-icon">/\</span>
              <h2 class="init-main-title">NORTHERN CANOPY SIM</h2>
            </div>

            <div class="init-checks">
              <div class="check-line">&gt; INITIALIZING BC_FORESTRY_OS... <span class="check-status ok">OK</span></div>
              <div class="check-line">&gt; MOUNTING DRIVES... <span class="check-status ok">OK</span></div>
              <div class="check-line">&gt; SYSTEM LOGIN &gt; ENTER CREW HANDLE _</div>
            </div>

            <div class="crew-input-section">
              <label class="field-label" for="crew-name-input">CREW HANDLE</label>
              <input id="crew-name-input" class="init-input" type="text" value="The Timber Wolves" />
            </div>

            <button id="intro-continue-btn" class="init-primary full-width" type="button">
              INITIALIZE SEQUENCE <span class="btn-arrow">â–¶</span>
            </button>
          </div>
        </section>

        <!-- Role Step -->
        <section id="role-step" class="init-step">
          <div class="init-content compact">
            <div class="init-header-compact">
              <span class="tree-ascii">/\</span>
              <span class="init-title-inline">NORTHERN CANOPY SIM</span>
            </div>

            <div class="init-checks-compact">
              <span>&gt; INITIALIZING BC_FORESTRY_OS... <span class="check-status ok">OK</span></span>
              <span>&gt; MOUNTING DRIVES... <span class="check-status ok">OK</span></span>
              <span>&gt; SYSTEM LOGIN &gt; SELECT OPERATOR CLASS _</span>
            </div>

            <div id="role-grid" class="role-grid-compact"></div>

            <div class="init-footer-compact">
              <button id="role-glossary-btn" class="init-ghost-sm" type="button">[?] Glossary</button>
              <button id="role-continue-btn" class="init-primary-sm" type="button">
                INITIALIZE SEQUENCE <span class="btn-arrow">â–¶</span>
              </button>
            </div>
          </div>
        </section>

        <!-- Area Step -->
        <section id="area-step" class="init-step">
          <div class="init-content">
            <div class="init-logo">
              <span class="tree-icon">/\</span>
              <h2 class="init-main-title">NORTHERN CANOPY SIM</h2>
            </div>

            <div class="init-checks">
              <div class="check-line">&gt; OPERATOR CLASS CONFIRMED... <span class="check-status ok">OK</span></div>
              <div class="check-line">&gt; LOADING TERRAIN DATA... <span class="check-status ok">OK</span></div>
              <div class="check-line">&gt; SELECT OPERATING AREA _</div>
            </div>

            <div class="area-grid">
              <div id="area-list" class="area-list" role="list"></div>
              <div class="area-detail" id="area-detail"></div>
            </div>

            <div class="init-footer-actions">
              <button id="area-glossary-btn" class="init-ghost" type="button">[?] Glossary</button>
              <button id="area-continue-btn" class="init-primary" type="button">
                DEPLOY CREW <span class="btn-arrow">â–¶</span>
              </button>
            </div>
          </div>
        </section>

        <!-- Init Footer -->
        <div class="init-status-footer">
          <span>STATUS: ONLINE</span>
          <span>|</span>
          <span id="init-zone-display">ZONE: ---</span>
          <span>|</span>
          <span>[ENTER] CONFIRM SELECTION</span>
        </div>
      </div>
    </div>

    <div class="game-wrapper">
      <!-- Modern mode: Header bar -->
      <header id="modern-header" class="modern-header">
        <div class="modern-header-left">
          <span class="modern-logo-icon">ðŸŒ²</span>
          <div class="modern-title-group">
            <span class="modern-title">BC FORESTRY SIMULATOR</span>
            <span class="modern-subtitle">TERMINAL V1.0 // CONNECTED</span>
          </div>
        </div>
        <div class="modern-header-right">
          <div class="system-status-badge">
            <span class="status-dot"></span>
            <span>SYSTEM ONLINE</span>
          </div>
          <button id="modern-settings-btn" class="modern-settings-btn" type="button" aria-label="Settings">âš™</button>
        </div>
      </header>

      <!-- Modern mode: Stat cards row -->
      <div id="modern-stats-row" class="modern-stats-row">
        <div class="modern-stat-card">
          <span class="stat-card-label">CURRENT YEAR</span>
          <span class="stat-card-value" id="modern-year-value">2025</span>
        </div>
        <div class="modern-stat-card">
          <span class="stat-card-label">FUNDS</span>
          <span class="stat-card-value" id="modern-funds-value">$80,000</span>
        </div>
        <div class="modern-stat-card">
          <span class="stat-card-label">ECO-HEALTH</span>
          <div class="stat-card-progress">
            <span class="stat-card-value" id="modern-eco-value">85%</span>
            <div class="stat-card-bar"><div class="stat-card-fill" id="modern-eco-fill" style="width: 85%"></div></div>
          </div>
        </div>
        <div class="modern-stat-card">
          <span class="stat-card-label">ZONE</span>
          <div class="stat-card-zone">
            <span class="zone-icon">ðŸŒ²</span>
            <span class="stat-card-value" id="modern-zone-value">Sub-Boreal Spruce</span>
          </div>
        </div>
      </div>

      <!-- Modern mode: Left metrics sidebar -->
      <aside id="metrics-sidebar" class="metrics-sidebar">
        <div class="metrics-header">SYSTEM METRICS</div>
        <div class="metric-item">
          <div class="metric-row">
            <span class="metric-label">OPS PROGRESS</span>
            <span class="metric-value" id="metric-progress-value">0%</span>
          </div>
          <div class="metric-bar"><div class="metric-fill" id="metric-progress-fill" style="width: 0%"></div></div>
        </div>
        <div class="metric-item">
          <div class="metric-row">
            <span class="metric-label">ENERGY</span>
            <span class="metric-value" id="metric-energy-value">100%</span>
          </div>
          <div class="metric-bar"><div class="metric-fill" id="metric-energy-fill" style="width: 100%"></div></div>
        </div>
        <div class="metric-item">
          <div class="metric-row">
            <span class="metric-label">STRESS</span>
            <span class="metric-value" id="metric-stress-value">0%</span>
          </div>
          <div class="metric-bar"><div class="metric-fill stress" id="metric-stress-fill" style="width: 0%"></div></div>
        </div>
        <div class="metric-item">
          <div class="metric-row">
            <span class="metric-label">BUDGET</span>
            <span class="metric-value" id="metric-budget-value">100%</span>
          </div>
          <div class="metric-bar"><div class="metric-fill" id="metric-budget-fill" style="width: 100%"></div></div>
        </div>
        <div id="metrics-extra" class="metrics-extra"></div>
        <div class="metrics-directive">
          <div class="directive-header">ACTIVE DIRECTIVE</div>
          <div class="directive-text" id="directive-text">Complete your assigned objectives while managing resources efficiently.</div>
        </div>
      </aside>

      <!-- Main game screen -->
      <main class="game-screen">
        <!-- Classic mode: Header with title and actions -->
        <header class="header classic-only">
          <h1 class="header-title">BC FORESTRY TRAIL</h1>
          <div class="header-actions">
            <button id="status-btn" class="header-btn" type="button" aria-label="View status">
              [S] Status
            </button>
            <button id="glossary-btn" class="header-btn" type="button" aria-label="Glossary">
              [G] Glossary
            </button>
            <button id="help-btn" class="header-btn" type="button" aria-label="Help">
              [?] Help
            </button>
            <button id="restart-btn" class="header-btn" type="button" aria-label="Restart game">
              [R] Restart
            </button>
          </div>
        </header>

        <!-- Status display area (adapts between modes) -->
        <div id="status-area" class="status-area">
          <!-- Classic: Status bar -->
          <div id="status-bar" class="status-bar">
            <div class="status-item">
              <span class="status-label" id="day-label">DAY</span>
              <span id="day-value" class="status-value">1</span>
            </div>
            <div class="status-item">
              <span class="status-label">PROGRESS</span>
              <span id="progress-value" class="status-value">0%</span>
            </div>
            <div class="status-item">
              <span class="status-label">CREW</span>
              <span id="crew-value" class="status-value">5/5</span>
            </div>
            <div class="status-item">
              <span class="status-label">MORALE</span>
              <span id="morale-value" class="status-value">75%</span>
            </div>
          </div>

          <!-- Modern: Stat cards (for desk modes header layout) -->
          <div id="stat-cards" class="stat-cards">
            <div class="stat-card" data-stat="day">
              <div class="stat-card-label" id="stat-day-label">DAY</div>
              <div class="stat-card-value" id="stat-day-value">1</div>
            </div>
            <div class="stat-card" data-stat="progress">
              <div class="stat-card-label">PROGRESS</div>
              <div class="stat-card-value" id="stat-progress-value">0%</div>
              <div class="stat-card-bar">
                <div class="stat-card-fill" id="stat-progress-fill" style="width: 0%"></div>
              </div>
            </div>
            <div class="stat-card" data-stat="crew">
              <div class="stat-card-label">CREW</div>
              <div class="stat-card-value" id="stat-crew-value">5/5</div>
            </div>
            <div class="stat-card" data-stat="morale">
              <div class="stat-card-label">MORALE</div>
              <div class="stat-card-value" id="stat-morale-value">75%</div>
            </div>
          </div>
        </div>

        <!-- Terminal window (modern mode has window chrome) -->
        <div id="terminal-window" class="terminal-window">
          <div class="terminal-window-header">
            <div class="window-dots">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
            </div>
            <span class="terminal-file-path" id="terminal-file-path">/VAR/LOG/SYSTEM.LOG</span>
          </div>
          <div id="terminal" class="terminal" role="log" aria-live="polite"></div>
        </div>

        <!-- Decision area (buttons and input) -->
        <div id="action-area" class="action-area">
          <div id="decision-header" class="decision-header">
            <span class="decision-icon">âš¡</span>
            <span class="decision-title" id="decision-title">AWAITING INPUT</span>
          </div>
          <div id="choices" class="choices"></div>
          <div id="input-wrapper" class="input-wrapper" hidden>
            <span class="input-prompt">&gt;</span>
            <input
              id="text-input"
              type="text"
              class="text-input"
              placeholder="Type here..."
              autocomplete="off"
              autocapitalize="off"
              spellcheck="false"
              aria-label="Text input"
            />
            <button id="submit-btn" class="submit-btn" type="button">[ENTER]</button>
          </div>
          <div id="command-input" class="command-input">
            <span class="command-prompt">&gt; Awaiting command input...</span>
            <button id="execute-btn" class="execute-btn" type="button">EXECUTE</button>
          </div>
        </div>
      </main>

      <!-- Side panel for detailed status -->
      <aside id="side-panel" class="side-panel" aria-label="Detailed status">
        <div class="panel-header">
          <h2 class="panel-title">STATUS REPORT</h2>
          <button id="close-panel" class="close-btn" type="button" aria-label="Close panel">[X]</button>
        </div>
        <div id="panel-content" class="panel-content">
          <!-- Crew section -->
          <section class="panel-section">
            <h3 class="section-title">CREW</h3>
            <div id="crew-panel" class="crew-panel"></div>
          </section>
          <!-- Resources section -->
          <section class="panel-section">
            <h3 class="section-title">SUPPLIES</h3>
            <div id="resources-panel" class="resources-panel"></div>
          </section>
          <!-- Location section -->
          <section class="panel-section">
            <h3 class="section-title">LOCATION</h3>
            <div id="location-panel" class="location-panel"></div>
          </section>
        </div>
      </aside>

      <!-- Panel backdrop (mobile) -->
      <div id="panel-backdrop" class="panel-backdrop" hidden></div>

      <!-- Modern mode: Footer hotkey bar -->
      <footer class="footer-hotkeys">
        <div class="footer-left">
          <button type="button" class="footer-btn" id="footer-glossary-btn">
            <span class="footer-key">[G]</span>
            <span class="footer-label">GLOSSARY</span>
          </button>
          <button type="button" class="footer-btn" id="footer-restart-btn">
            <span class="footer-key">[R]</span>
            <span class="footer-label">RESTART</span>
          </button>
        </div>
        <div class="footer-right">
          <span class="footer-status">SECURE CONNECTION // BC_FORESTRY_NODE</span>
          <span class="footer-indicator"></span>
        </div>
      </footer>
    </div>

    <!-- Modal dialog -->
    <div id="modal" class="modal" hidden>
      <div class="modal-box" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-header">
          <h2 id="modal-title" class="modal-title"></h2>
        </div>
        <div id="modal-body" class="modal-body"></div>
        <div id="modal-actions" class="modal-actions"></div>
      </div>
    </div>

    <script type="module" src="js/game.js"></script>
  </body>
</html>
